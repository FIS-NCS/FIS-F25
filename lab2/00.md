# Introduction

### 1. Message Integrity

> Trust that a message was not altered (e.g., by mistake) from some intended "reference version".

Example use case: **Internet/UDP checksum**

- Sender includes checksum in UDP header: (src_port, dst_port, length, **checksum**, data)
- Checksum can use simple binary compuation (e.g., 1's complement addition), CRC, or a hash function from MD/SHA families.
- Receiver verifies checksum: a mismatch means that the message was probably corrupted in transit and should be discarded.
  - Note that anyone can form a message with a valid checksum!

```bash
echo -n 'message' | cksum -a crc
```

### 2. Authenticity (Message Authentication)

> Trust that the "reference version" came from the *someone* with knowledge of a shared secret.

Example use case: **HMAC-SHA used in OSPFv2**.

- A group of routers are broadcasting important routing messages `M` in plaintext.
- A malicious actor in the network can join the party and start broadcasting false information.
- To prevent that, trusted routers are preconfigured with a shared secret `S`
- A message is considered *authentic* if it includes a valid HMAC(M, S): Hash-based Message Authentication Code.

```bash
echo -n "Important_Routing_Information" | openssl dgst -sha1 -hmac "Routers_Shared_Secret"
```

### 3. Non-Repudiation

> Trust that information could have only been authored by a specific entity. This entity **cannot deny** that they authored the data.

Example use case: **Digital signatures for software/email with GNU Privacy Guard (GPG)**

1. Enter your details (name, email) for GPG to create your public and secret keys in `~/.gngpg`

    ```bash
    gpg --generate-key
    ```

2. Export public key if needed to share

    ```shell
    gpg --armor --export "<Your Name>" > pubkey.asc 
    ```

3. Sign some data using your key

    ```bash
    echo "Important Email from Me" > email.txt
    gpg --detach-sign --sign --output email.txt.sig email.txt
    ```

4. For a friend to verify your `email.txt`, they need to either trust you directly (`gpg --import pubkey.asc`) or have you in their [web of trust](https://en.wikipedia.org/wiki/Web_of_trust) (to trust someone who trusts someones ... who trusts you)

    ```bash
    gpg --verify email.txt.sig email.txt
    ```

### Questions for discussion

- Why non-repudiation implies authenticity?
- Why authenticity implies integrity?
- Why HMAC is not a simple hash of (message+secret)?
