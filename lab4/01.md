# Penetration Testing

Penetration testing (pentesting) is an *authorized* simulated cyberattack on a computer system, performed to identify weaknesses/vulnerabilities that an adversary may exploit.

> Relevant concept: [Cyber kill chain](https://en.wikipedia.org/wiki/Cyber_kill_chain)

There are generally five [phases](https://en.wikipedia.org/wiki/Penetration_test#Penetration_testing_phases) of a penetration test:

1. **Footprinting**: gathering public information about a target (e.g., OSINT)
1. **Scanning**: probing the target for more information (e.g., network mapping)
1. **Gaining access**: exploiting detected vulnerabilities (e.g., delivering a malicious payload)
1. **Maintaining access**: strengthen foothold on the system (e.g., setting up a backdoor)
1. **Reporting**: documenting the process, assessing impact, and recommending remediations.

## Practice

During the lab, we will setup a demo to exploit [CVE-2023-46604](https://nvd.nist.gov/vuln/detail/CVE-2023-46604)

- **Vulnerability**: Unauthenticated Remote Code Execution (RCE)
- **Affected Software**: [Apache ActiveMQ](https://activemq.apache.org/) versions prior to 5.15.16 and others.
- **CVSSv3 Score**: 9.8 (Critical)
- **Associated CWEs:** [CWE-502](https://cwe.mitre.org/data/definitions/502.html): deserialization of untrusted data.
- **Description**:
  - Exploits OpenWire Protocol marshaller to achieve RCE by manipulating serialized class types to cause the broker to instantiate any class on the classpath.
- **References**:
  - CVE Details: <https://www.cvedetails.com/cve/CVE-2023-46604/>
  - GitHub Advisory Database: <https://github.com/advisories/GHSA-crg9-44h2-xw35>
  - Matasploit module description: <https://github.com/rapid7/metasploit-framework/blob/master/documentation/modules/exploit/multi/misc/apache_activemq_rce_cve_2023_46604.md>
  - Official announcement: <https://activemq.apache.org/security-advisories.data/CVE-2023-46604-announcement.txt>

## Exercise 1

Perform similar investigation around another CVE of your choice.

1. Choose a CVE for which a container is available at [VulHub](https://github.com/vulhub/vulhub/)

   - You'll exploit it in upcoming exercises.
   - Not sure? [CVE-2025-3248](https://nvd.nist.gov/vuln/detail/CVE-2025-3248) might be a good choice.

2. Report the vulnerability, affected software versions, CVSS score, related CWEs, detailed technical description, and references from at least three sources.

  > Resources include: CVE Details, GitHub Advisory Database, metasploit module docs, exploit-db, official announcements, relevant issues/PRs in code repositories, and external blogs.
