# Disk Analysis

[The Sleuth Kit (TSK)](https://wiki.sleuthkmmit.org/index.php?title=TSK_Tool_Overview) is a suite of CLI forensic utilities for extracting and parsing data from a wide variety of formats. Tools like [Autopsy](https://www.autopsy.com/) and [Plaso](https://github.com/log2timeline/plaso) use TSK under the hood.

## Practice

Goal: to analyze a disk file and extract a hidden flag.

1. Install TSK

    ```bash
    sudo apt install sleuthkit
    ```

1. Download and inspect a sample disk dump

    ```bash
    cp /app/workshop/disk.tar.gz .
    tar -xvzf disk.tar.gz
    file disk
    ```

1. Inspect partition table of the disk

    ```bash
    mmls disk
    ```

1. List directories in the main parition (starting at offset `2048`)

    ```bash
    fls -o 2048 disk
    ```

1. List files in the `/root` directory (offset `18290`)

    ```bash
    fls -o 2048 disk 18290
    ```

1. Get the content of the `.txt` file at `/root`

    ```bash
    icat -o 2048 disk 18291
    ```

1. Exclude irrelevant characters

    ```bash
    icat -o 2048 disk 18291 | tr -d ' /\\\\-_()\n'
    ```

## Exercise 2

Given the `.e01` evidence created in Exercise 1, use TSK and/or other tools to carve the content of `secret.txt` that was created and deleted by the criminal.
